instrument:
  id: exaspim-01
  master_device: pcie-6738
  channels:
    CH561:
      lasers: [561 nm]
      cameras: [vp-151mx]
      focusing_stages: [left focusing stage, right focusing stage, camera focusing stage]
    CH639:
      lasers: [639 nm]
      cameras: [vp-151mx]
      focusing_stages: [left focusing stage, right focusing stage, camera focusing stage]
    CH488:
      lasers: [488 nm]
      cameras: [vp-151mx]
      focusing_stages: [left focusing stage, right focusing stage, camera focusing stage]
  devices:
    vp-151mx:
      type: camera
      driver: voxel.devices.camera.vieworks_egrabber
      module: Camera
      init:
        id: MP151BBX006
      properties:
        exposure_time_ms: 10.0
        pixel_type: mono16
        height_px: 10640
        width_px: 14192
        trigger:
          mode: on
          polarity: risingedge
          source: line0
        bit_packing_mode: msb
        binning: 1
    488 nm:
      type: laser
      driver: voxel.devices.laser.simulated
      module: SimulatedLaser
      color: blue
      init:
        id: COM1
        wavelength: 488
    561 nm:
      type: laser
      driver: voxel.devices.laser.simulated
      module: SimulatedLaser
      color: green
      init:
        id: COM1
        wavelength: 561
    639 nm:
      type: laser
      driver: voxel.devices.laser.simulated
      module: SimulatedLaser
      color: red
      init:
        id: COM1
        wavelength: 639
    tiger controller:
      type: stage
      driver: tigerasi.tiger_controller
      module: TigerController
      init:
        com_port: COM5
      subdevices:
        z stage:
          type: scanning_stage
          driver: voxel.devices.stage.asi
          module: Stage
          init:
            hardware_axis: z
            instrument_axis: z
          properties:
            mode: step shoot
            speed_mm_s: 1.0
            backlash_mm: 0.0
            acceleration_ms: 200.0
        x stage:
          type: tiling_stage
          driver: voxel.devices.stage.asi
          module: Stage
          init:
            hardware_axis: x
            instrument_axis: x
          properties:
            mode: off
            speed_mm_s: 1.0
            backlash_mm: 0.004
            acceleration_ms: 200.0
        y stage:
          type: tiling_stage
          driver: voxel.devices.stage.asi
          module: Stage
          init:
            hardware_axis: v
            instrument_axis: y
          properties:
            mode: off
            speed_mm_s: 1.0
            backlash_mm: 0.004
            acceleration_ms: 200.0
        theta stage:
          type: tiling_stage
          driver: voxel.devices.stage.asi
          module: Stage
          init:
            hardware_axis: t
            instrument_axis: t
          properties:
            mode: off
            speed_mm_s: 1.0
            backlash_mm: 0.004
            acceleration_ms: 200.0
        left focusing stage:
          type: focusing_stage
          driver: voxel.devices.stage.asi
          module: Stage
          init:
            hardware_axis: a
            instrument_axis: a
        right focusing stage:
          type: focusing_stage
          driver: voxel.devices.stage.asi
          module: Stage
          init:
            hardware_axis: b
            instrument_axis: b
        camera focusing stage:
          type: focusing_stage
          driver: voxel.devices.stage.asi
          module: Stage
          init:
            hardware_axis: m
            instrument_axis: m
        joystick:
           type: joystick
           driver: voxel.devices.joystick.asi
           module: Joystick
           init:
             joystick_mapping:
               joystick_x:
                 instrument_axis: x
                 polarity: default
               joystick_y:
                 instrument_axis: z
                 polarity: default
               wheel_z:
                 instrument_axis: a
                 polarity: default
               wheel_f:
                 instrument_axis: b
                 polarity: default
             axis_mapping:
               x: x
               z: z
               a: a
               b: b
    # power meter:
    #   type: power_meter
    #   driver: voxel.devices.power_meter.thorlabs_pm100
    #   module: ThorlabsPowerMeter
    #   init:
    #     id: pm100d
    #     conn: P0044066
    # flip mount:
    #   type: flip_mount
    #   driver: voxel.devices.flip_mount.thorlabs
    #   module: ThorlabsFlipMount
    #   init:
    #     id: flip-mount-1
    #     conn: '37008111'
    #     positions:
    #       imaging: 0
    #       alignment: 1
    #   settings:
    #     flip_time_ms: 2800
    # aotf:
    #   type: aotf
    #   driver: voxel.devices.aotf.aaopto
    #   module: AOTF
    #   init:
    #     port: COM20
    # left tunable lens:
    #   type: tunable_lens
    #   driver: voxel.devices.aotf.optotune_icc4c
    #   module: TunableLens
    #   init:
    #     port: COM19
    #     channel: 1
    #   settings:
    #     mode: external
    # right tunable lens:
    #   type: tunable_lens
    #   driver: voxel.devices.aotf.optotune_icc4c
    #   module: TunableLens
    #   init:
    #     port: COM19
    #     channel: 1
    #   settings:
    #     mode: external
    pcie-6738:
      type: daq
      driver: voxel.devices.daq.ni
      module: DAQ
      init:
        dev: Dev2
      properties:
        tasks:
          ao_task:
            name: ao task
            ports:
              left tunable lens:
                port: ao1
                waveform: sawtooth
                device_max_volts: 5.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
                  end_time_ms:
                    channels:
                      CH488: 544.0
                      CH561: 544.0
                      CH639: 544.0
                  amplitude_volts:
                    channels:
                      CH488: -0.078
                      CH561: -0.078
                      CH639: -0.078
                  offset_volts:
                    channels:
                      CH488: 2.448
                      CH561: 2.448
                      CH639: 2.448
                  cutoff_frequency_hz:
                    channels:
                      CH488: 1000
                      CH561: 1000
                      CH639: 1000
              right tunable lens:
                port: ao3
                waveform: sawtooth
                device_max_volts: 5.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
                  end_time_ms:
                    channels:
                      CH488: 544.0
                      CH561: 544.0
                      CH639: 544.0
                  amplitude_volts:
                    channels:
                      CH488: -0.078
                      CH561: -0.078
                      CH639: -0.078
                  offset_volts:
                    channels:
                      CH488: 2.448
                      CH561: 2.448
                      CH639: 2.448
                  cutoff_frequency_hz:
                    channels:
                      CH488: 1000
                      CH561: 1000
                      CH639: 1000
              stage:
                port: a05
                waveform: square wave
                device_max_volts: 5.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 544.0
                      CH561: 544.0
                      CH639: 544.0
                  end_time_ms:
                    channels:
                      CH488: 554.0
                      CH561: 554.0
                      CH639: 554.0
                  max_volts:
                    channels:
                      CH488: 5.0
                      CH561: 5.0
                      CH639: 5.0
                  min_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
              camera:
                port: ao21
                waveform: square wave
                device_max_volts: 5.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 25.0
                      CH561: 25.0
                      CH639: 25.0
                  end_time_ms:
                    channels:
                      CH488: 35.0
                      CH561: 35.0
                      CH639: 35.0
                  max_volts:
                    channels:
                      CH488: 5.0
                      CH561: 5.0
                      CH639: 5.0
                  min_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
              488 nm:
                port: ao17
                waveform: square wave
                device_max_volts: 10.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 15.0
                      CH561: 15.0
                      CH639: 15.0
                  end_time_ms:
                    channels:
                      CH488: 549.0
                      CH561: 549.0
                      CH639: 549.0
                  max_volts:
                    channels:
                      CH488: 5.0
                      CH561: 0.0
                      CH639: 0.0
                  min_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
              561 nm:
                port: ao13
                waveform: square wave
                device_max_volts: 10.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 15.0
                      CH561: 15.0
                      CH639: 15.0
                  end_time_ms:
                    channels:
                      CH488: 549.0
                      CH561: 549.0
                      CH639: 549.0
                  max_volts:
                    channels:
                      CH488: 0.0
                      CH561: 10.0
                      CH639: 0.0
                  min_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
              639 nm:
                port: ao9
                waveform: square wave
                device_max_volts: 10.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 15.0
                      CH561: 15.0
                      CH639: 15.0
                  end_time_ms:
                    channels:
                      CH488: 549.0
                      CH561: 549.0
                      CH639: 549.0
                  max_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 5.0
                  min_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
              left piezo x:
                port: ao7
                waveform: square wave
                device_max_volts: 10.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
                  end_time_ms:
                    channels:
                      CH488: 594.0
                      CH561: 594.0
                      CH639: 594.0
                  max_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
                  min_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
              left piezo y:
                port: ao11
                waveform: square wave
                device_max_volts: 10.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
                  end_time_ms:
                    channels:
                      CH488: 594.0
                      CH561: 594.0
                      CH639: 594.0
                  max_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
                  min_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
              left piezo z:
                port: ao14
                waveform: square wave
                device_max_volts: 10.0
                device_min_volts: 0.0
                parameters:
                  start_time_ms:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
                  end_time_ms:
                    channels:
                      CH488: 594.0
                      CH561: 594.0
                      CH639: 594.0
                  max_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
                  min_volts:
                    channels:
                      CH488: 0.0
                      CH561: 0.0
                      CH639: 0.0
            timing:
              period_time_ms: 544.0
              rest_time_ms: 50.0
              retriggerable: 'on'
              sample_mode: finite
              sampling_frequency_hz: 10000
              trigger_mode: 'on'
              trigger_polarity: rising
              trigger_port: PFI0
          co_task:
            counters:
              - ctr0
            name: co task
            timing:
              frequency_hz: 1.65
              output_port: PFI0
              trigger_mode: 'off'
